<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Assigment 03, Coursera WebGL</title>
    <link rel="stylesheet" href="/coursera/webgl/styles/pure-min.css">
    <link rel="stylesheet" href="/coursera/webgl/styles/grids-responsive-min.css">
    <link rel="stylesheet" href="main.css">
</head>
<body>

<nav class="segmented-button toolbar">
    <!-- <input id="viewId" name="mode" value="view" type="radio" checked>
    <label for="viewId" class="first">View</label>

    <input id="editorId" name="mode" value="editor" type="radio">
    <label for="editorId" class="last">Editor</label> -->

    <input id="solidId" name="modePaint" value="solid" type="radio" checked>
    <label for="solidId" class="spaced first">Solid</label>

    <input id="wireframeId" name="modePaint" value="wireframe" type="radio">
    <label for="wireframeId">Wire</label>

    <input id="solidWireId" name="modePaint" value="solidWire" type="radio">
    <label for="solidWireId" class="last">Both</label>

    <input id="addObjectButton" type="button" value="Add Object" class="spaced" />
    <!-- <input id="delObjectButton" type="button" value="Del Selected" /> -->
</nav>

<div id="layout" class="pure-g">
    <div class="sidebar pure-u-1 pure-u-md-1-4">
        <div class="header">

            <fieldset class="canvas-control">
                <legend>Objects</legend>
                <ul id="objects-list" class="scroll-list vertical-list">
                </ul>
            </fieldset>

            <fieldset class="canvas-control">
                <legend>Transformation</legend>
                <nav class="segmented-button">
                    <input id="translateTransform" name="transformation" value="translate" type="radio" checked>
                    <label for="translateTransform" class="first">Translate</label>

                    <input id="scaleTransform" name="transformation" value="scale" type="radio">
                    <label for="scaleTransform">Scale</label>

                    <input id="rotationTransform" name="transformation" value="rotate" type="radio">
                    <label for="rotationTransform" class="last">Rotation</label>
                </nav>

                <div class="transformation-control">
                    <p>X <input id="transformX" type="number" value="0.0" step="0.1"></p>
                    <p>Y <input id="transformY" type="number" value="0.0" step="0.1"></p>
                    <p>Z <input id="transformZ" type="number" value="0.0" step="0.1"></p>
                </div>
            </fieldset>

        </div>
    </div>

    <div class="content pure-u-1 pure-u-md-3-4">
        <canvas id="gl-canvas" class="bordered">
        <!-- <canvas id="gl-canvas" width="1260" height="914" class="bordered"> -->
            Oops ... your browser doesn't support the HTML5 canvas element
        </canvas>
    </div>
</div>

<div id="addObjectModal" class="modal">
    <fieldset class="modal-form">
        <legend>New Object</legend>
        <ul id="new-object" class="vertical-list">
            <li data-value="cone">Cone</li>
            <li data-value="cube">Cube</li>
            <li data-value="cylinder">Cylinder</li>
            <li data-value="sphere">Sphere</li>
        </ul>

        <ul class="vertical-list">
            <li id="dismissModal">Cancel</li>
        </ul>
    </fieldset>
</div>

<script id="vertex-shader" type="x-shader/x-vertex">
attribute  vec4 vPosition;
attribute  vec4 vColor;
varying vec4 fColor;

uniform vec3 worldRotation;
uniform mat4 projectionMatrix;

void main()
{
    // Compute the sines and cosines of theta for each of
    //   the three axes in one computation.
    // float theta = 3.0;
    vec3 angles = radians( worldRotation );
    vec3 c = cos( angles );
    vec3 s = sin( angles );

    // Remeber: these matrices are column-major
    mat4 rx = mat4(
            1.0,  0.0,  0.0, 0.0,
		    0.0,  c.x,  s.x, 0.0,
		    0.0, -s.x,  c.x, 0.0,
		    0.0,  0.0,  0.0, 1.0
    );

    mat4 ry = mat4(
            c.y, 0.0, -s.y, 0.0,
		    0.0, 1.0,  0.0, 0.0,
		    s.y, 0.0,  c.y, 0.0,
		    0.0, 0.0,  0.0, 1.0
    );

    mat4 rz = mat4(
            c.z, -s.z, 0.0, 0.0,
		    s.z,  c.z, 0.0, 0.0,
		    0.0,  0.0, 1.0, 0.0,
		    0.0,  0.0, 0.0, 1.0
    );

    fColor = vColor;
    gl_Position = rz * ry * rx * projectionMatrix * vPosition;
}
</script>

<script id="fragment-shader" type="x-shader/x-fragment">
precision mediump float;

varying vec4 fColor;
uniform int wireframe;

void
main()
{
    if(wireframe == 0) {
        gl_FragColor = fColor;
    } else {
        gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);
    }
}
</script>

<script id="vs-choose-color" type="x-shader/x-vertex">
attribute vec4 vPosition;
attribute vec4 vColor;
varying vec4 fColor;

uniform vec2 dimension;
varying float height;


void main()
{
    float x = -1.0 + 2.0 * vPosition.x / dimension[0];
    float y = -1.0 + 2.0 * (dimension[1] - vPosition.y) / dimension[1];
    gl_Position = vec4(x, y, 1.0, 1.0);

    height = dimension[1];
    fColor = vColor;
}
</script>

<script id="fs-choose-color" type="x-shader/x-fragment">
precision mediump float;

varying vec4 fColor;
varying float height;

void
main()
{
    float y = gl_FragCoord.y / height;//canvas height
    if(y > .5) {
      gl_FragColor = mix(fColor, vec4(1.0, 1.0, 1.0, 1.0), (y-0.5)*2.0);
    } else {
      gl_FragColor = mix(vec4(0.0, 0.0, 0.0, 1.0), fColor, y*2.0);
    }
}
</script>

<script type="application/javascript" src="/coursera/webgl/Common/webgl-utils.js"></script>
<script type="application/javascript" src="/coursera/webgl/Common/initShaders.js"></script>
<script type="application/javascript" src="/coursera/webgl/Common/MV.js"></script>
<script type="application/javascript" src="/coursera/webgl/Common/flatten.js"></script>
<!-- <script type="application/javascript" src="/coursera/webgl/assigments/dist/browser-polyfill.js"></script> -->
<script type="application/javascript;version=1.7" src="ObjectCreator.js"></script>
<script type="application/javascript;version=1.7" src="ObjectManager.js"></script>
<script type="application/javascript;version=1.7" src="geometry.js"></script>
<script type="application/javascript;version=1.7" src="Cube.js"></script>
<script type="application/javascript;version=1.7" src="Cone.js"></script>
<script type="application/javascript;version=1.7" src="Cylinder.js"></script>
<script type="application/javascript;version=1.7" src="Sphere.js"></script>
<script type="application/javascript;version=1.7" src="dom.js"></script>
<script type="application/javascript;version=1.7" src="cad1.js"></script>
<!-- <script type="application/javascript;version=1.7" src="color_choose.js"></script> -->
</body>
</html>
